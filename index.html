<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Promise-fzzz</title>
</head>

<body>
  <script src="./lib/Promise.js"></script>
  <script>
    // const p = new Promise((resolve, reject) => {
    //   setTimeout(()=>{
    //     //resolve(1);
    //     reject(2);
    //     console.log('fff'); //加这一行是验证：状态是立刻改变，但是回调函数是异步执行的
    //   },100);
    // }).then(
    //   value => {console.log('onResolved1',value) },
    //   reason => { 
    //     console.log('onRejected1',reason);
    //     //throw 4;
    //     return new Promise((resolve,reject)=>{
    //       reject(5);
    //     })
    //   }
    // ).then(
    //   value => {console.log('onResolved2',value) },
    //   reason => { 
    //     console.log('onRejected2',reason);
    //     throw 6;
    //   }
    // ).catch(reason=>{
    //   console.log('onRejected3',reason);
    // })

    const p1=Promise.resolve(2);//如果是一般值，p1成功，value就是这个值
    const p2=Promise.resolve(Promise.resolve(3));//如果是成功的promise，p2成功，value是这个promise的value
    const p3=Promise.resolve(Promise.reject(4));//如果是失败的promise，p3失败，reason是这个promise的reason
    // p1.then(value=>{console.log('p1',value)});
    // p2.then(value=>{console.log('p2',value)});
    // p3.catch(reason=>{console.log('p3',reason)});

    const pAll=Promise.all([p1,p2]);
    pAll.then(
      values=>{
        console.log('all onResolved',values)
      },
      reason=>{
        console.log('all onRejected',reason);
      }
    )
  </script>
</body>

</html>